set_main_supporter = {
    custom_description = {
        text = set_main_supporter
        object = $SUPPORTER$

        set_global_variable = {
            name = chosen_supporter
            value = $SUPPORTER$
        }

        $SUPPORTER$ = {
            save_scope_as = SUPPORTER
            set_variable = {
                name = chosen_supporter_of
                value = $SUPPORTED$
            }
        }
    }
}

quit_choosing_my_side_event = {
        custom_tooltip = {
            text = drive_the_narrative.abandon_tooltip
        }

        custom_tooltip = {
            text = drive_the_narrative.abandon_reimburse_tooltip

            save_scope_value_as = {
                name = decision_prestige_cost
                value = drive_the_narrative_decision_prestige_cost
            }
            add_prestige_no_experience = drive_the_narrative_decision_prestige_cost
        }
}

set_competition_level = {
    if = {
        limit = {
            $NB_SUPPORTERS$ > 6
        }


        custom_tooltip = {
            text = set_competition_level_major.tt

            save_scope_value_as = {
                name = competition_level
                value = 3
            }
        }
    }
    else_if = {
        limit = {
            $NB_SUPPORTERS$ > 3
        }

        custom_tooltip = {
            text = set_competition_level_medium.tt

            save_scope_value_as = {
                name = competition_level
                value = 2
            }
        }
    }
    else_if = {
        limit = {
            $NB_SUPPORTERS$ > 1
        }

        custom_tooltip = {
            text = set_competition_level_minor.tt

            save_scope_value_as = {
                name = competition_level
                value = 1
            }
        }
    }
    else = {
        save_scope_value_as = {
            name = competition_level
            value = 0
        }
    }
}





tlm_select_helper = {
    add_to_list = potential_helpers

    set_variable = {
        name = helper_score
        value = diplomacy
    }

    # Diplomat
    if = {
        limit = {
            has_trait = diplomat
        }

        change_variable = {
            name = helper_score
            add = 75
        }
    }

    # Gregarious
    if = {
        limit = {
            has_trait = gregarious
        }

        change_variable = {
            name = helper_score
            add = 20
        }
    }

    # Partner
    if = {
        limit = {
            is_spouse_of = $CHARACTER$
        }

        change_variable = {
            name = helper_score
            add = 10
        }
    }

    # Family member
    if = {
        limit = {
            is_close_family_of = $CHARACTER$
        }

        change_variable = {
            name = helper_score
            add = 5
        }
    }
}





tlm_trigger_actual_event = {
    trigger_event = {
        id = drive_the_narrative.4
        days = { 1 2 }
    }
}